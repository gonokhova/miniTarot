const TelegramBot = require('node-telegram-bot-api');
const express = require('express');

const token = '7876942204:AAHjs9Px4CkRoqjPrIwPy1KAOZmJPg-iCVk';
const bot = new TelegramBot(token, { polling: true });

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–∫–∞ –≤ –ø–∞–º—è—Ç–∏)
let users = {};
let subscriptions = {};

// === –ü–û–õ–ù–ê–Ø –ö–û–õ–û–î–ê –¢–ê–†–û (78 –∫–∞—Ä—Ç) ===
const tarotCards = [
  // –°—Ç–∞—Ä—à–∏–µ –ê—Ä–∫–∞–Ω—ã (22 –∫–∞—Ä—Ç—ã)
  { name: "0. –®—É—Ç", meaning: "–ù–µ–≤–∏–Ω–Ω–æ—Å—Ç—å, –Ω–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, —Å–≤–æ–±–æ–¥–∞" },
  { name: "I. –ú–∞–≥", meaning: "–°–∏–ª–∞ –≤–æ–ª–∏, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞" },
  { name: "II. –í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞", meaning: "–¢–∞–π–Ω—ã, –∏–Ω—Ç—É–∏—Ü–∏—è, —Å–∫—Ä—ã—Ç–æ–µ –∑–Ω–∞–Ω–∏–µ, –º—É–¥—Ä–æ—Å—Ç—å" },
  { name: "III. –ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞", meaning: "–ò–∑–æ–±–∏–ª–∏–µ, –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ" },
  { name: "IV. –ò–º–ø–µ—Ä–∞—Ç–æ—Ä", meaning: "–í–ª–∞—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ—Ä—è–¥–æ–∫, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å" },
  { name: "V. –ò–µ—Ä–æ—Ñ–∞–Ω—Ç", meaning: "–¢—Ä–∞–¥–∏—Ü–∏—è, —Ä–µ–ª–∏–≥–∏—è, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ" },
  { name: "VI. –í–ª—é–±–ª—ë–Ω–Ω—ã–µ", meaning: "–õ—é–±–æ–≤—å, –≤—ã–±–æ—Ä, –≥–∞—Ä–º–æ–Ω–∏—è, –æ—Ç–Ω–æ—à–µ–Ω–∏—è" },
  { name: "VII. –ö–æ–ª–µ—Å–Ω–∏—Ü–∞", meaning: "–ü–æ–±–µ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, –¥–≤–∏–∂–µ–Ω–∏–µ, —Ä–µ—à–∏–º–æ—Å—Ç—å" },
  { name: "VIII. –°–∏–ª–∞", meaning: "–°–º–µ–ª–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ" },
  { name: "IX. –û—Ç—à–µ–ª—å–Ω–∏–∫", meaning: "–°–∞–º–æ–∞–Ω–∞–ª–∏–∑, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –ø–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã" },
  { name: "X. –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã", meaning: "–°—É–¥—å–±–∞, —É–¥–∞—á–∞, —Ü–∏–∫–ª—ã, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã" },
  { name: "XI. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", meaning: "–ë–∞–ª–∞–Ω—Å, –∫–∞—Ä–º–∞, —á–µ—Å—Ç–Ω–æ—Å—Ç—å, –∑–∞–∫–æ–Ω" },
  { name: "XII. –ü–æ–≤–µ—à–µ–Ω–Ω—ã–π", meaning: "–ñ–µ—Ä—Ç–≤–∞, —Å–º–µ–Ω–∞ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã, –ø–∞—É–∑–∞" },
  { name: "XIII. –°–º–µ—Ä—Ç—å", meaning: "–ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ" },
  { name: "XIV. –£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", meaning: "–ì–∞—Ä–º–æ–Ω–∏—è, –±–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ" },
  { name: "XV. –î—å—è–≤–æ–ª", meaning: "–ò–ª–ª—é–∑–∏–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –∏—Å–∫—É—à–µ–Ω–∏—è" },
  { name: "XVI. –ë–∞—à–Ω—è", meaning: "–ö—Ä–∞—Ö –∏–ª–ª—é–∑–∏–π, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã, –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ" },
  { name: "XVII. –ó–≤–µ–∑–¥–∞", meaning: "–ù–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –¥—É—Ö–æ–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ" },
  { name: "XVIII. –õ—É–Ω–∞", meaning: "–°—Ç—Ä–∞—Ö–∏, –∏–ª–ª—é–∑–∏–∏, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å" },
  { name: "XIX. –°–æ–ª–Ω—Ü–µ", meaning: "–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, —è—Å–Ω–æ—Å—Ç—å, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏–ª–∞" },
  { name: "XX. –°—É–¥", meaning: "–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é, –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤" },
  { name: "XXI. –ú–∏—Ä", meaning: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è, —É—Å–ø–µ—Ö" },

  // –ú–ª–∞–¥—à–∏–µ –ê—Ä–∫–∞–Ω—ã: –ñ–µ–∑–ª—ã (14 –∫–∞—Ä—Ç)
  { name: "–¢—É–∑ –ñ–µ–∑–ª–æ–≤", meaning: "–≠–Ω–µ—Ä–≥–∏—è, –Ω–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª" },
  { name: "–î–≤–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –±—É–¥—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏" },
  { name: "–¢—Ä–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —ç–∫—Å–ø–∞–Ω—Å–∏—è, –¥–∞–ª—å–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å" },
  { name: "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ü—Ä–∞–∑–¥–Ω–∏–∫, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –¥–æ–º–∞—à–Ω–∏–π —É—é—Ç" },
  { name: "–ü—è—Ç—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ, –±–æ—Ä—å–±–∞ –∑–∞ –∏–¥–µ–∏" },
  { name: "–®–µ—Å—Ç—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ü–æ–±–µ–¥–∞, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, —É—Å–ø–µ—Ö" },
  { name: "–°–µ–º—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ó–∞—â–∏—Ç–∞ —Å–≤–æ–∏—Ö —É–±–µ–∂–¥–µ–Ω–∏–π, —Å—Ç–æ–π–∫–æ—Å—Ç—å" },
  { name: "–í–æ—Å—å–º—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –Ω–æ–≤–æ—Å—Ç–∏, –ø–æ–µ–∑–¥–∫–∏" },
  { name: "–î–µ–≤—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä—É–±–µ–∂" },
  { name: "–î–µ—Å—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–ë—Ä–µ–º—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞" },
  { name: "–ü–∞–∂ –ñ–µ–∑–ª–æ–≤", meaning: "–≠–Ω—Ç—É–∑–∏–∞–∑–º, –Ω–æ–≤—ã–µ –∏–¥–µ–∏, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ" },
  { name: "–†—ã—Ü–∞—Ä—å –ñ–µ–∑–ª–æ–≤", meaning: "–°—Ç—Ä–∞—Å—Ç—å, –¥–µ–π—Å—Ç–≤–∏–µ, –∞–≤–∞–Ω—Ç—é—Ä–∏–∑–º" },
  { name: "–ö–æ—Ä–æ–ª–µ–≤–∞ –ñ–µ–∑–ª–æ–≤", meaning: "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ö–∞—Ä–∏–∑–º–∞, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ" },
  { name: "–ö–æ—Ä–æ–ª—å –ñ–µ–∑–ª–æ–≤", meaning: "–°–∏–ª–∞ –≤–æ–ª–∏, —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç" },

  // –ú–ª–∞–¥—à–∏–µ –ê—Ä–∫–∞–Ω—ã: –ö—É–±–∫–∏ (14 –∫–∞—Ä—Ç)
  { name: "–¢—É–∑ –ö—É–±–∫–æ–≤", meaning: "–ù–æ–≤—ã–µ —á—É–≤—Å—Ç–≤–∞, –ª—é–±–æ–≤—å, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ" },
  { name: "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–°–æ—é–∑, –≥–∞—Ä–º–æ–Ω–∏—è, –≤–∑–∞–∏–º–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞" },
  { name: "–¢—Ä–æ–π–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–î—Ä—É–∂–±–∞, –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ, —Ä–∞–¥–æ—Å—Ç—å" },
  { name: "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–ê–ø–∞—Ç–∏—è, —É–ø—É—â–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Å–∞–º–æ–∞–Ω–∞–ª–∏–∑" },
  { name: "–ü—è—Ç—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–ü–æ—Ç–µ—Ä—è, —Å–æ–∂–∞–ª–µ–Ω–∏–µ, —Ñ–æ–∫—É—Å –Ω–∞ –Ω–µ–≥–∞—Ç–∏–≤–µ" },
  { name: "–®–µ—Å—Ç—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –¥–µ—Ç—Å–∫–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å" },
  { name: "–°–µ–º—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–ò–ª–ª—é–∑–∏–∏, –≤—ã–±–æ—Ä, –º–µ—á—Ç—ã" },
  { name: "–í–æ—Å—å–º—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–£—Ö–æ–¥, –ø–æ–∏—Å–∫ –Ω–æ–≤–æ–≥–æ, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ" },
  { name: "–î–µ–≤—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ, –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∂–µ–ª–∞–Ω–∏–π" },
  { name: "–î–µ—Å—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", meaning: "–ì–∞—Ä–º–æ–Ω–∏—è –≤ —Å–µ–º—å–µ, —Å—á–∞—Å—Ç—å–µ, –¥–æ–º–∞—à–Ω–∏–π —É—é—Ç" },
  { name: "–ü–∞–∂ –ö—É–±–∫–æ–≤", meaning: "–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ–≤—ã–µ —ç–º–æ—Ü–∏–∏, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞" },
  { name: "–†—ã—Ü–∞—Ä—å –ö—É–±–∫–æ–≤", meaning: "–ò–¥–µ–∞–ª–∏–∑–º, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ" },
  { name: "–ö–æ—Ä–æ–ª–µ–≤–∞ –ö—É–±–∫–æ–≤", meaning: "–ó–∞–±–æ—Ç–∞, –∏–Ω—Ç—É–∏—Ü–∏—è, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑—Ä–µ–ª–æ—Å—Ç—å" },
  { name: "–ö–æ—Ä–æ–ª—å –ö—É–±–∫–æ–≤", meaning: "–ú—É–¥—Ä–æ—Å—Ç—å, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ" },

  // –ú–ª–∞–¥—à–∏–µ –ê—Ä–∫–∞–Ω—ã: –ú–µ—á–∏ (14 –∫–∞—Ä—Ç)
  { name: "–¢—É–∑ –ú–µ—á–µ–π", meaning: "–Ø—Å–Ω–æ—Å—Ç—å –º—ã—Å–ª–∏, –ø—Ä–æ—Ä—ã–≤, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–±–µ–¥–∞" },
  { name: "–î–≤–æ–π–∫–∞ –ú–µ—á–µ–π", meaning: "–¢—É–ø–∏–∫, —Å–ª–æ–∂–Ω—ã–π –≤—ã–±–æ—Ä, –∏–∑–±–µ–≥–∞–Ω–∏–µ –ø—Ä–∞–≤–¥—ã" },
  { name: "–¢—Ä–æ–π–∫–∞ –ú–µ—á–µ–π", meaning: "–°–µ—Ä–¥–µ—á–Ω–∞—è –±–æ–ª—å, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ" },
  { name: "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ú–µ—á–µ–π", meaning: "–û—Ç–¥—ã—Ö, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –º–µ–¥–∏—Ç–∞—Ü–∏—è" },
  { name: "–ü—è—Ç—ë—Ä–∫–∞ –ú–µ—á–µ–π", meaning: "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, –ø–æ–±–µ–¥–∞ –ª—é–±–æ–π —Ü–µ–Ω–æ–π, —É–Ω–∏–∂–µ–Ω–∏–µ" },
  { name: "–®–µ—Å—Ç—ë—Ä–∫–∞ –ú–µ—á–µ–π", meaning: "–ü–µ—Ä–µ—Ö–æ–¥, –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é" },
  { name: "–°–µ–º—ë—Ä–∫–∞ –ú–µ—á–µ–π", meaning: "–û–±–º–∞–Ω, —Ö–∏—Ç—Ä–æ—Å—Ç—å, —Å–∫—Ä—ã—Ç—ã–µ –º–æ—Ç–∏–≤—ã" },
  { name: "–í–æ—Å—å–º—ë—Ä–∫–∞ –ú–µ—á–µ–π", meaning: "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∂–µ—Ä—Ç–≤–∞, —á—É–≤—Å—Ç–≤–æ –ª–æ–≤—É—à–∫–∏" },
  { name: "–î–µ–≤—è—Ç–∫–∞ –ú–µ—á–µ–π", meaning: "–¢—Ä–µ–≤–æ–≥–∞, –∫–æ—à–º–∞—Ä—ã, —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã" },
  { name: "–î–µ—Å—è—Ç–∫–∞ –ú–µ—á–µ–π", meaning: "–ö–æ–Ω–µ—Ü, –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ" },
  { name: "–ü–∞–∂ –ú–µ—á–µ–π", meaning: "–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ, –Ω–æ–≤—ã–µ –∏–¥–µ–∏, –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å" },
  { name: "–†—ã—Ü–∞—Ä—å –ú–µ—á–µ–π", meaning: "–†–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞–≥—Ä–µ—Å—Å–∏—è, –Ω–∞–ø–æ—Ä" },
  { name: "–ö–æ—Ä–æ–ª–µ–≤–∞ –ú–µ—á–µ–π", meaning: "–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —è—Å–Ω–æ—Å—Ç—å, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å" },
  { name: "–ö–æ—Ä–æ–ª—å –ú–µ—á–µ–π", meaning: "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç, –≤–ª–∞—Å—Ç—å, —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å" },

  // –ú–ª–∞–¥—à–∏–µ –ê—Ä–∫–∞–Ω—ã: –ü–µ–Ω—Ç–∞–∫–ª–∏ (14 –∫–∞—Ä—Ç)
  { name: "–¢—É–∑ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏" },
  { name: "–î–≤–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ë–∞–ª–∞–Ω—Å, –∞–¥–∞–ø—Ç–∞—Ü–∏—è, –≥–∏–±–∫–æ—Å—Ç—å" },
  { name: "–¢—Ä–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Ä–æ—Å—Ç" },
  { name: "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å, –∂–∞–¥–Ω–æ—Å—Ç—å" },
  { name: "–ü—è—Ç—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, –∏–∑–æ–ª—è—Ü–∏—è" },
  { name: "–®–µ—Å—Ç—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–©–µ–¥—Ä–æ—Å—Ç—å, –ø–æ–º–æ—â—å, –æ–±–º–µ–Ω" },
  { name: "–°–µ–º—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–¢–µ—Ä–ø–µ–Ω–∏–µ, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏" },
  { name: "–í–æ—Å—å–º—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–£—Å–µ—Ä–¥–∏–µ, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º" },
  { name: "–î–µ–≤—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–£–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ, –¥–æ—Å—Ç–∞—Ç–æ–∫, —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å" },
  { name: "–î–µ—Å—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, —Å–µ–º–µ–π–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ, –Ω–∞—Å–ª–µ–¥–∏–µ" },
  { name: "–ü–∞–∂ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–û–±—É—á–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª" },
  { name: "–†—ã—Ü–∞—Ä—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å, —Ç—Ä—É–¥–æ–ª—é–±–∏–µ, –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å" },
  { name: "–ö–æ—Ä–æ–ª–µ–≤–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, –∑–∞–±–æ—Ç–∞, –∏–∑–æ–±–∏–ª–∏–µ" },
  { name: "–ö–æ—Ä–æ–ª—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", meaning: "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" }
];

// === –§–£–ù–ö–¶–ò–ò –ë–û–¢–ê ===
bot.onText(/\/start/, (msg) => {
  const chatId = msg.chat.id;
  const warning = "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è. –¢–∞—Ä–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ—á–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π.";
  const menu = "–í—ã–±–µ—Ä–∏ —Ä–∞—Å–∫–ª–∞–¥:\n1. –ö–∞—Ä—Ç–∞ –¥–Ω—è (/card)\n2. –†–∞—Å–∫–ª–∞–¥ –Ω–∞ –Ω–µ–¥–µ–ª—é (/week)\n3. –û—Ç–≤–µ—Ç –î–∞/–ù–µ—Ç (/yesno)";
  bot.sendMessage(chatId, warning + "\n\n" + menu);
});

// –ö–∞—Ä—Ç–∞ –¥–Ω—è
bot.onText(/\/card/, (msg) => {
  const chatId = msg.chat.id;
  const userId = msg.from.id;

  if (users[userId] && users[userId].freeUses >= 2 && !subscriptions[userId]) {
    bot.sendMessage(chatId, "‚ùå –õ–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤ –∏—Å—á–µ—Ä–ø–∞–Ω. –ö—É–ø–∏ –ø–æ–¥–ø–∏—Å–∫—É /subscribe.");
    return;
  }

  const randomCard = tarotCards[Math.floor(Math.random() * tarotCards.length)];
  const response = `üîÆ –¢–≤–æ—è –∫–∞—Ä—Ç–∞ –¥–Ω—è: *${randomCard.name}*\n\n*–¢–æ–ª–∫–æ–≤–∞–Ω–∏–µ*: ${randomCard.meaning}`;

  if (!users[userId]) {
    users[userId] = { freeUses: 0, history: [] };
  }
  users[userId].freeUses += 1;
  users[userId].history.push(`–ö–∞—Ä—Ç–∞ –¥–Ω—è: ${randomCard.name}`);

  bot.sendMessage(chatId, response, { parse_mode: "Markdown" });
});

// –ü–æ–¥–ø–∏—Å–∫–∞ (–∏–º–∏—Ç–∞—Ü–∏—è)
bot.onText(/\/subscribe/, (msg) => {
  const chatId = msg.chat.id;
  const userId = msg.from.id;
  
  subscriptions[userId] = new Date().getTime() + 30 * 24 * 60 * 60 * 1000; // +30 –¥–Ω–µ–π
  bot.sendMessage(chatId, "‚úÖ –¢—ã –æ—Ñ–æ—Ä–º–∏–ª –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –º–µ—Å—è—Ü! –¢–µ–ø–µ—Ä—å —Ä–∞—Å–∫–ª–∞–¥—ã –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.");
});

// –ò—Å—Ç–æ—Ä–∏—è
bot.onText(/\/history/, (msg) => {
  const chatId = msg.chat.id;
  const userId = msg.from.id;
  
  if (users[userId] && users[userId].history.length > 0) {
    const historyText = "üìú –¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è —Ä–∞—Å–∫–ª–∞–¥–æ–≤:\n" + users[userId].history.join("\n");
    bot.sendMessage(chatId, historyText);
  } else {
    bot.sendMessage(chatId, "–£ —Ç–µ–±—è –µ—â–µ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å–∫–ª–∞–¥–æ–≤.");
  }
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
const app = express();
const PORT = 3000;
app.listen(PORT, () => {
  console.log(`–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!`);
});
